---
import Layout from "../layouts/Layout.astro";
import HeroBanner from "../components/Sections/HeroBanner.astro";
import TheProblem from "../components/Sections/TheProblem.astro";
import OurPhilosophy from "../components/Sections/OurPhilosophy.astro";
import OurSolution from "../components/Sections/OurSolution.astro";
import SaveMoney from "../components/Sections/SaveMoney.astro";
import AboutUs from "../components/Sections/AboutUs.astro";
import TalkToUs from "../components/Sections/TalkToUs.astro";
import { baseUrl, baseImageUrl } from "../utils/domain.ts";
import type { imagesObject } from "../utils/types.ts";

let response = await fetch(`${baseUrl}home`);
let page = await response.json();
let data = page[0];
const {
	acf: {
		heading__herobanner,
		description__herobanner,
		button__herobanner,
		image__herobanner,
		subheading__herobanner,
		partnerlogo1__herobanner,
		partnerlogo2__herobanner,
		partnerlogo3__herobanner,
		partnerlogo4__herobanner,
		heading_small_text__problem,
		heading_big_text__problem,
		list__problem,
		image__problem,
		button__problem,
		heading_small_text__philosophy,
		heading_big_text__philosophy,
		image__philosophy,
		list__philosophy,
		button__philosophy,
		heading_small_text__solution,
		heading_big_text__solution,
		description_1__solution,
		description_2__solution,
		button__solution,
		image_1__solution,
		image_2__solution,
		image_3__solution,
		image_4__solution,
		heading_small_text__benefits,
		heading_big_text__benefits,
		list__benefits,
		button_1__benefits,
		button_2__benefits,
	},
} = data;

const imagesUrl: imagesObject[] = [];

if (partnerlogo1__herobanner && partnerlogo1__herobanner !== "") {
	response = await fetch(`${baseImageUrl}${partnerlogo1__herobanner}`);
	const imageUrl = await response.json();
	imagesUrl.push({
		name: "partnerlogo1__herobanner",
		url: imageUrl.guid.rendered,
	});
}

if (partnerlogo2__herobanner && partnerlogo2__herobanner !== "") {
	response = await fetch(`${baseImageUrl}${partnerlogo2__herobanner}`);
	const imageUrl = await response.json();
	imagesUrl.push({
		name: "partnerlogo2__herobanner",
		url: imageUrl.guid.rendered,
	});
}

if (partnerlogo3__herobanner && partnerlogo3__herobanner !== "") {
	response = await fetch(`${baseImageUrl}${partnerlogo3__herobanner}`);
	const imageUrl = await response.json();
	imagesUrl.push({
		name: "partnerlogo3__herobanner",
		url: imageUrl.guid.rendered,
	});
}

if (partnerlogo4__herobanner && partnerlogo4__herobanner !== "") {
	response = await fetch(`${baseImageUrl}${partnerlogo4__herobanner}`);
	const imageUrl = await response.json();
	imagesUrl.push({
		name: "partnerlogo4__herobanner",
		url: imageUrl.guid.rendered,
	});
}
---

<Layout title="Power From Within">
	<HeroBanner
		heading={heading__herobanner}
		description={description__herobanner}
		buttonText={button__herobanner}
		image={image__herobanner}
		subheading={subheading__herobanner}
		imagesArray={imagesUrl}
	/>
	<TheProblem
		heading_small_text={heading_small_text__problem}
		heading_big_text={heading_big_text__problem}
		list={list__problem}
		image={image__problem}
		button={button__problem}
	/>
	<OurPhilosophy
		heading_small_text={heading_small_text__philosophy}
		heading_big_text={heading_big_text__philosophy}
		image={image__philosophy}
		list={list__philosophy}
		buttonText={button__philosophy}
	/>
	<OurSolution
		heading_small_text={heading_small_text__solution}
		heading_big_text={heading_big_text__solution}
		description_1={description_1__solution}
		description_2={description_2__solution}
		button={button__solution}
		image1={image_1__solution}
		image2={image_2__solution}
		image3={image_3__solution}
		image4={image_4__solution}
	/>

	<SaveMoney
		heading_small_text={heading_small_text__benefits}
		heading_big_text={heading_big_text__benefits}
		list={list__benefits}
		button_1={button_1__benefits}
		button_2={button_2__benefits}
	/>
	<AboutUs />
	<TalkToUs />
</Layout>

<style></style>
